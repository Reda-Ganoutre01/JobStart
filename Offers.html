<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JobStart-Offers</title>
    <!-- Styling File -->
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/offers.css" />
    <!-- Site logo / favicon -->
    <link
      rel="icon"
      href="assets/logo/logo_jobstart_single.png"
      type="image/png"
    />
    <link rel="apple-touch-icon" href="assets/logo/logo_jobstart_single.png" />
    <!-- icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Roboto:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <!-- AOS library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <!-- dark mode -->
    <script type="text/javascript" src="js/darkmode.js" defer></script>
    <!-- auth utilities -->
    <script type="text/javascript" src="js/auth.js" defer></script>
  </head>
  <body>
    <!-- Page loader -->
    <div id="site-loader" aria-hidden="false">
      <div class="loader-container">
        <div class="logo-wrapper">
          <img
            src="assets/logo/logo_jobstart_single.png"
            alt="JobStart Logo"
            class="logo-image"
          />
        </div>

        <div class="progress-bar">
          <div class="progress-fill"></div>
        </div>

        <h1 class="brand-text">
          <span class="job">Job</span><span class="start">Start</span>
        </h1>

        <p class="loading-text">Chargement de vos opportunit√©s...</p>
      </div>
    </div>

    <!-- Header -->
    <header>
      <div class="container">
        <!-- theme -->
        <a href="index.html">
          <img src="assets/logo/logo-lightmode.png" alt="JobStar" id="logo" />
        </a>

        <nav>
          <!-- Dropdown menu button -->
          <button
            class="dropdown-menu"
            aria-label="Drop down menu"
            title="Drop down menu"
            aria-expanded="false"
          >
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
          </button>

          <ul id="nav-links">
            <li><a href="index.html">Accueil</a></li>
            <li><a href="Offers.html">Offres</a></li>
            <li><a href="Conseils.html">Conseils</a></li>
            <li><a href="Apropos.html">A propos</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li class="mobile-action"><a href="login.html">Se Connecter</a></li>
            <li class="mobile-action"><a href="SignUp.html">S'inscrire</a></li>
          </ul>
          <button id="theme-switch" title="Basculer th√®me">üåô</button>
        </nav>
      </div>
    </header>
    <!-- End Header -->

    <main>
      <div
        class="offers-layout container login-wrapper"
        data-aos="fade-up"
        data-aos-duration="2000"
      >
        <aside
          class="offers-sidebar login-wrapper"
          aria-label="Filtres"
          data-aos="fade-right"
          data-aos-duration="5000"
        >
          <form class="filter-form" onsubmit="return false" novalidate>
            <div class="filter-group">
              <label for="offer-search">Mots-cl√©s</label>
              <input
                id="offer-search"
                type="search"
                placeholder="Titre, entreprise..."
              />
            </div>
            <div class="filter-group">
              <label for="filter-location">Localisation</label>
              <input id="filter-location" type="text" placeholder="Ville" />
            </div>
            <div class="filter-group">
              <label for="offer-type">Type</label>
              <select id="offer-type">
                <option value="Tous" selected>Tous</option>
                <option value="Emploi">Emploi</option>
                <option value="Stage">Stage</option>
                <option value="Freelance">Freelance</option>
              </select>
            </div>
            <div class="filter-group">
              <label for="filter-category">Cat√©gorie</label>
              <select id="filter-category">
                <option value="">Toutes</option>
                <option value="Design">Design</option>
                <option value="Development">Development</option>
                <option value="Marketing">Marketing</option>
                <option value="Data">Data</option>
              </select>
            </div>
            <fieldset class="filter-group">
              <legend>Date de publication</legend>
              <label
                ><input type="radio" name="filter-date" value="" checked />
                Toutes</label
              >
              <label
                ><input type="radio" name="filter-date" value="7" /> < 7
                jours</label
              >
              <label
                ><input type="radio" name="filter-date" value="30" /> < 30
                jours</label
              >
              <label
                ><input type="radio" name="filter-date" value="30+" /> 30+
                jours</label
              >
            </fieldset>
            <div class="filter-actions">
              <button
                type="button"
                id="reset-filters"
                class="reset-btn"
                aria-label="R√©initialiser les filtres"
              >
                R√©initialiser les filtres
              </button>
              <!-- Mobile submit button for filtering -->
              <button
                type="submit"
                id="mobile-filter-submit"
                class="mobile-filter-submit"
                style="display: none"
              >
                Appliquer les filtres
              </button>
            </div>
          </form>
        </aside>
        <section
          class="offers-results login-wrapper"
          aria-labelledby="offers-heading"
          data-aos="fade-left"
          data-aos-duration="5000"
        >
          <div class="offers-topbar">
            <!-- Create Offer Button (for recruiters only) -->
            <div id="recruiterActions" style="display: none">
              <a href="create-offer.html" class="create-offer-btn">
                <i class="fas fa-plus"></i> Cr√©er une offre
              </a>
            </div>
            <!-- Mobile filter toggle button -->
            <button
              class="mobile-filter-toggle"
              aria-label="Toggle filters"
              title="Toggle filters"
              aria-expanded="false"
              aria-hidden="true"
              style="
                background: none;
                border: none;
                padding: 0;
                display: flex;
                align-items: center;
                justify-content: center;
              "
            >
              <svg
                width="32"
                height="32"
                viewBox="0 0 32 32"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                style="display: block"
              >
                <circle cx="16" cy="8" r="2.5" fill="#1e90ff" />
                <circle cx="16" cy="16" r="2.5" fill="#1e90ff" />
                <circle cx="16" cy="24" r="2.5" fill="#1e90ff" />
              </svg>
            </button>

            <h1 id="offers-heading">Offres disponibles</h1>
            <div class="results-meta">
              R√©sultats: <span id="offers-count">0</span>
            </div>
            <div class="results-actions">
              <label class="sr-only" for="sort-select">Trier</label>
              <select id="sort-select">
                <option value="recent" selected>Plus r√©centes</option>
                <option value="old">Plus anciennes</option>
              </select>
              <label class="sr-only" for="page-size">Par page</label>
              <select id="page-size">
                <option value="10" selected>10</option>
                <option value="20">20</option>
              </select>
            </div>
          </div>
          <div id="offers-loading" class="offers-loading" aria-hidden="true">
            <div
              class="spinner"
              role="status"
              aria-label="Chargement des offres"
            ></div>
          </div>
          <div id="offers-list" class="offers-list" aria-live="polite"></div>
          <nav
            id="offers-pagination"
            class="offers-pagination"
            aria-label="Pagination"
          ></nav>
        </section>
      </div>
    </main>
    <!-- Footer -->
    <footer class="footer">
      <div class="footer-container">
        <div class="footer-content">
          <div class="footer-brand">
            <a href="index.html" class="logo">
              <img
                src="assets/logo/logo-lightmode.png"
                alt="JobStar"
                id="logo"
              />
            </a>
            <div class="contact-info">
              <div class="contact-item">
                <strong>Contactez-nous</strong>
              </div>
              <div class="contact-item">
                <i class="fas fa-phone-alt"></i>
                <div class="contact-text">
                  <div class="phone">+212 5 22 00 00 00</div>
                </div>
              </div>
              <div class="contact-item">
                <i class="fas fa-map-marker-alt"></i>
                <div class="contact-text">Agadir, Maroc<br /></div>
              </div>
              <div class="contact-item">
                <i class="fas fa-envelope"></i>
                <div class="contact-text">contact@jobstart.ma</div>
              </div>
            </div>
          </div>

          <div class="footer-column">
            <h3>Pour les Candidats</h3>
            <ul class="footer-links">
              <li>
                <a href="#"
                  ><i class="fas fa-chevron-right"></i>Chercher un Stage</a
                >
              </li>
              <li>
                <a href="#"
                  ><i class="fas fa-chevron-right"></i>Chercher un Emploi</a
                >
              </li>
              <li>
                <a href="#"><i class="fas fa-chevron-right"></i>Mon Profil</a>
              </li>
              <li>
                <a href="#"
                  ><i class="fas fa-chevron-right"></i>Mes Candidatures</a
                >
              </li>
              <li>
                <a href="#"
                  ><i class="fas fa-chevron-right"></i>Alertes Emploi</a
                >
              </li>
            </ul>
          </div>

          <div class="footer-column">
            <h3>Pour les Entreprises</h3>
            <ul class="footer-links">
              <li>
                <a href="#"
                  ><i class="fas fa-chevron-right"></i>Publier une Offre</a
                >
              </li>
              <li>
                <a href="#"
                  ><i class="fas fa-chevron-right"></i>Espace Entreprise</a
                >
              </li>
              <li>
                <a href="#"
                  ><i class="fas fa-chevron-right"></i>Trouver des Candidats</a
                >
              </li>
              <li>
                <a href="#"><i class="fas fa-chevron-right"></i>Nos Services</a>
              </li>
            </ul>
          </div>

          <div class="footer-column">
            <h3>√Ä Propos</h3>
            <ul class="footer-links">
              <li>
                <a href="#"
                  ><i class="fas fa-chevron-right"></i>Qui sommes-nous</a
                >
              </li>
              <li>
                <a href="#"
                  ><i class="fas fa-chevron-right"></i>Notre Mission</a
                >
              </li>
              <li>
                <a href="#"><i class="fas fa-chevron-right"></i>L'√âquipe</a>
              </li>
              <li>
                <a href="#"><i class="fas fa-chevron-right"></i>T√©moignages</a>
              </li>
              <li>
                <a href="#"><i class="fas fa-chevron-right"></i>FAQ</a>
              </li>
            </ul>
          </div>

          <div class="footer-column">
            <h3>Ressources Utiles</h3>
            <ul class="footer-links">
              <li>
                <a href="#"><i class="fas fa-chevron-right"></i>Conseils CV</a>
              </li>
              <li>
                <a href="#"
                  ><i class="fas fa-chevron-right"></i>Conseils Entretien</a
                >
              </li>
              <li>
                <a href="#"
                  ><i class="fas fa-chevron-right"></i>Guide de Carri√®re</a
                >
              </li>
              <li>
                <a href="#"
                  ><i class="fas fa-chevron-right"></i>Mentions L√©gales</a
                >
              </li>
              <li>
                <a href="#"
                  ><i class="fas fa-chevron-right"></i>Confidentialit√©</a
                >
              </li>
            </ul>
          </div>
        </div>

        <div class="footer-bottom">
          <p class="copyright">
            ¬© 2025 JobStar by Reda Ganoutre-Youssef el Menlani . All rights
            reserved.
          </p>
          <div class="social-links">
            <a href="#" class="social-link" aria-label="Facebook">
              <i class="fab fa-facebook-f"></i>
            </a>
            <a href="#" class="social-link" aria-label="Twitter">
              <i class="fab fa-twitter"></i>
            </a>
            <a href="#" class="social-link" aria-label="Instagram">
              <i class="fab fa-instagram"></i>
            </a>
            <a href="#" class="social-link" aria-label="LinkedIn">
              <i class="fab fa-linkedin-in"></i>
            </a>
          </div>
        </div>
      </div>
    </footer>
    <!-- End Footer -->
    <!-- Embedded offers data for offline use -->
    <script src="data/offers.js"></script>
    <script src="data/forms.data.js"></script>
    <script src="js/main.js"></script>
    <script src="js/session.js"></script>
    <script src="js/applications.js" defer></script>
    <script src="js/create-offer.js" defer></script>
    <script src="js/offers.js"></script>
    <script src="js/loading.js"></script>
    <!--AOS library -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
      // Check if mobile and first load for AOS animations
      const isMobile = window.innerWidth <= 992;
      const isFirstLoad = !sessionStorage.getItem("offersPageVisited");

      if (!isMobile || isFirstLoad) {
        AOS.init();
        if (isMobile) {
          sessionStorage.setItem("offersPageVisited", "true");
        }
      } else {
        // Remove AOS attributes on mobile after first load
        document.querySelectorAll("[data-aos]").forEach((element) => {
          element.removeAttribute("data-aos");
          element.removeAttribute("data-aos-duration");
          element.removeAttribute("data-aos-delay");
        });
      }

      // Mobile filter toggle functionality
      document.addEventListener("DOMContentLoaded", function () {
        const filterToggle = document.querySelector(".mobile-filter-toggle");
        const filtersSidebar = document.querySelector(".offers-sidebar");
        if (filterToggle && filtersSidebar) {
          filterToggle.addEventListener("click", function (e) {
            e.stopPropagation();
            // Always reset sidebar state before opening
            filtersSidebar.classList.remove("mobile-visible");
            filtersSidebar.style.opacity = "";
            filtersSidebar.style.visibility = "";
            var form = filtersSidebar.querySelector(".filter-form");
            if (form) {
              form.style.opacity = "";
              form.style.visibility = "";
            }
            // Now open
            filterToggle.setAttribute("aria-expanded", "true");
            filtersSidebar.classList.add("mobile-visible");
            filterToggle.classList.add("active");
            document.body.style.overflow = "hidden";
            filtersSidebar.style.opacity = "1";
            filtersSidebar.style.visibility = "visible";
            if (form) {
              form.style.opacity = "1";
              form.style.visibility = "visible";
            }
          });
          // Close sidebar on click outside (already handled in offers.js)
        }
      });
    </script>
    <!-- DEBUG: Log sidebar and form presence/visibility -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const filterToggle = document.querySelector(".mobile-filter-toggle");
        filterToggle &&
          filterToggle.addEventListener("click", function () {
            setTimeout(() => {
              const sidebar = document.querySelector(".offers-sidebar");
              const form = sidebar
                ? sidebar.querySelector(".filter-form")
                : null;
              console.log("[DEBUG] Sidebar present:", !!sidebar);
              if (sidebar) {
                console.log("[DEBUG] Sidebar classes:", sidebar.className);
                const style = window.getComputedStyle(sidebar);
                console.log(
                  "[DEBUG] Sidebar display:",
                  style.display,
                  "opacity:",
                  style.opacity,
                  "visibility:",
                  style.visibility,
                  "z-index:",
                  style.zIndex
                );
              }
              console.log("[DEBUG] Form present:", !!form);
              if (form) {
                const style = window.getComputedStyle(form);
                console.log(
                  "[DEBUG] Form display:",
                  style.display,
                  "opacity:",
                  style.opacity,
                  "visibility:",
                  style.visibility
                );
              }
            }, 300);
          });
      });
    </script>
  </body>
</html>
